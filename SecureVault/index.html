<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Password Manager</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="card login-card">
                <div class="card-body">
                    <h1 class="text-center mb-4">Password Manager</h1>
                    <div class="text-center mb-4">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <form id="login-form">
                        <div class="mb-3">
                            <label for="master-password" class="form-label">Master Password</label>
                            <input type="password" class="form-control" id="master-password" required>
                            <div class="form-text">This password will be used to encrypt your data.</div>
                        </div>
                        <div id="login-error" class="alert alert-danger d-none" role="alert">
                            Incorrect master password. Please try again.
                        </div>
                        <div id="setup-notice" class="alert alert-info d-none" role="alert">
                            First time? This master password will be used to set up your account.
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Unlock</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboard-screen" class="screen d-none">
            <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">Password Manager</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" id="all-passwords-link">All Passwords</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button" data-bs-toggle="dropdown">
                                    Categories
                                </a>
                                <ul class="dropdown-menu" id="categories-menu">
                                    <li><a class="dropdown-item" href="#" data-category="personal">Personal</a></li>
                                    <li><a class="dropdown-item" href="#" data-category="work">Work</a></li>
                                    <li><a class="dropdown-item" href="#" data-category="finance">Finance</a></li>
                                    <li><a class="dropdown-item" href="#" data-category="social">Social</a></li>
                                    <li><a class="dropdown-item" href="#" data-category="other">Other</a></li>
                                </ul>
                            </li>
                        </ul>
                        <form class="d-flex" id="search-form">
                            <input class="form-control me-2" type="search" placeholder="Search" id="search-input">
                            <button class="btn btn-outline-primary" type="submit">Search</button>
                        </form>
                        <button class="btn btn-danger ms-2" id="logout-button">Logout</button>
                    </div>
                </div>
            </nav>

            <div class="row mb-4">
                <div class="col">
                    <h2 id="current-view-title">All Passwords</h2>
                </div>
                <div class="col-auto">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#password-modal" id="add-password-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Password
                    </button>
                </div>
            </div>

            <div class="alert alert-info d-none" id="no-passwords-message">
                No passwords found. Click "Add Password" to create your first entry.
            </div>

            <div class="row" id="password-list">
                <!-- Password entries will be added here dynamically -->
            </div>
        </div>

        <!-- Password Modal (Add/Edit) -->
        <div class="modal fade" id="password-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modal-title">Add Password</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="password-form">
                            <input type="hidden" id="password-id">
                            <div class="mb-3">
                                <label for="site-name" class="form-label">Site/App Name</label>
                                <input type="text" class="form-control" id="site-name" required>
                            </div>
                            <div class="mb-3">
                                <label for="username" class="form-label">Username/Email</label>
                                <input type="text" class="form-control" id="username" required>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="password" required>
                                    <button class="btn btn-outline-secondary" type="button" id="toggle-password">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="password-visibility-icon">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                    </button>
                                    <button class="btn btn-outline-secondary" type="button" id="generate-password">Generate</button>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="website-url" class="form-label">Website URL</label>
                                <input type="url" class="form-control" id="website-url">
                            </div>
                            <div class="mb-3">
                                <label for="category" class="form-label">Category</label>
                                <select class="form-select" id="category">
                                    <option value="personal">Personal</option>
                                    <option value="work">Work</option>
                                    <option value="finance">Finance</option>
                                    <option value="social">Social</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="notes" class="form-label">Notes</label>
                                <textarea class="form-control" id="notes" rows="3"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="save-password">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Generator Modal -->
        <div class="modal fade" id="generator-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Password Generator</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="generated-password" class="form-label">Generated Password</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="generated-password" readonly>
                                <button class="btn btn-outline-secondary" type="button" id="copy-password">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="password-length" class="form-label">Length: <span id="length-value">16</span></label>
                            <input type="range" class="form-range" id="password-length" min="8" max="32" value="16">
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="include-uppercase" checked>
                                <label class="form-check-label" for="include-uppercase">Include Uppercase (A-Z)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="include-lowercase" checked>
                                <label class="form-check-label" for="include-lowercase">Include Lowercase (a-z)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="include-numbers" checked>
                                <label class="form-check-label" for="include-numbers">Include Numbers (0-9)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="include-symbols" checked>
                                <label class="form-check-label" for="include-symbols">Include Symbols (!@#$%^&*)</label>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary w-100" id="regenerate-password">Generate New Password</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="use-password">Use This Password</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Details Modal -->
        <div class="modal fade" id="details-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="details-title">Password Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="details-content">
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Site/App:</div>
                                <div class="col-8" id="details-site"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Username:</div>
                                <div class="col-8" id="details-username"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Password:</div>
                                <div class="col-8">
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="details-password" readonly>
                                        <button class="btn btn-outline-secondary" type="button" id="details-toggle-password">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                        </button>
                                        <button class="btn btn-outline-secondary" type="button" id="details-copy-password">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">URL:</div>
                                <div class="col-8" id="details-url"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Category:</div>
                                <div class="col-8" id="details-category"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Notes:</div>
                                <div class="col-8" id="details-notes"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Created:</div>
                                <div class="col-8" id="details-created"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-4 fw-bold">Last Modified:</div>
                                <div class="col-8" id="details-modified"></div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger me-auto" id="delete-password">Delete</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="edit-password">Edit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirm Delete Modal -->
        <div class="modal fade" id="confirm-delete-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Confirm Delete</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete this password entry? This action cannot be undone.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirm-delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div id="toast-notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <strong class="me-auto" id="toast-title">Notification</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" id="toast-message">
                    Action completed successfully.
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>
    <script src="js/encryption.js"></script>
    <script src="js/database.js"></script>
    <script src="js/passwordGenerator.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
